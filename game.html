<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" type="text/css" href="style.css">
    <title>South Park Memory</title>
</head>
<body>
    <p><h2>PLAAAAAAAAAAAAAAAAY !</h2></p>
    <div id="scoreJ1"> <h2> SCORE Joueur 1 : 0 </h2></div>
    <div id="scoreJ2"> <h2> SCORE Joueur 2 : 0 </h2></div>
    <div id="container">

    </div>
    
    

    <script>
        const backCard = ['ImageAigle/card1.jpg',
                        'ImageAigle/card2.jpg',
                        'ImageAigle/card3.jpg',    
                        'ImageAigle/card4.jpg',
                        'ImageAigle/card5.jpg',
                        'ImageAigle/card6.jpg',
                        'ImageAigle/card7.jpg',
                        'ImageAigle/card8.jpg',
                        'ImageAigle/card9.jpg',
                        'ImageAigle/card10.jpg',
                        'ImageAigle/card11.jpg',
                        'ImageAigle/card12.jpg',
                        'ImageAigle/card13.jpg',
                        'ImageAigle/card14.jpg',
                        'ImageAigle/card15.jpg',
                        'ImageAigle/card16.jpg',
                        'ImageAigle/card17.jpg',
                        'ImageAigle/card18.jpg',
                        'ImageAigle/card19.jpg',
                        'ImageAigle/card20.jpg',
        ];
        const frontCards = [
            'Img/card1.png',
            'Img/card2.png',
            'Img/card3.png',
            'Img/card4.png',
            'Img/card5.png',
            'Img/card6.png',
            'Img/card7.png',
            'Img/card8.png',
            'Img/card9.png',
            'Img/card10.png',
            'Img/card1.png',
            'Img/card2.png',
            'Img/card3.png',
            'Img/card4.png',
            'Img/card5.png',
            'Img/card6.png',
            'Img/card7.png',
            'Img/card8.png',
            'Img/card9.png',
            'Img/card10.png',
        ]

        

          shuffle(frontCards);


        let showCard = document.getElementById('container');
        let returnedCards = [];
        let joueurEtat = true;
        let evenFinded = 0;
        let scoreJ1 = 0;
        let scoreJ2 = 0
        let total = (scoreJ1 + scoreJ2 )


        
        function myFunctionJ1() {
             alert("Joueur 1, A toi de jouer !");
            }
        function myFunctionJ2() {
            alert("Joueur 2, A toi de jouer !");
            }

              function shuffle(frontCards) 
        {
            for (let i = frontCards.length - 1; i > 0; i--) {
                let j = Math.floor(Math.random() * (i + 1)); 
                [frontCards[i], frontCards[j]] = [frontCards[j], frontCards[i]];
            }
        }



            myFunctionJ1(); 
   
          function onClickedCard(index)
        {
            let backElt = document.getElementById(`back-${index}`);
            let frontElt = document.getElementById(`front-${index}`);
            backElt.style.display = "none";
            frontElt.style.display = "block";

           if (returnedCards.length < 2)
           {
            
           
            returnedCards.push(frontCards[index]);
           }
            if (returnedCards.length === 2)
            {
                
                if (returnedCards[0] === returnedCards[1])
                {
                    if (joueurEtat === true){
                        let mySound1 = new Audio(`veryGood.mp3`);
                                mySound1.play();
                    scoreJ1 = scoreJ1 +1;
                    returnedCards = [];
                    evenFinded = evenFinded + 1;
                    frontElt.style.display = "block";
                    console.log(total);
                    }
                    else{
                        
                    scoreJ2 = scoreJ2 +1;
                    returnedCards = [];
                    evenFinded = evenFinded + 1;
                    frontElt.style.display = "block";

                    }
                }
                
                    else 
                    {   let mySound2 = new Audio('tryAgain.mp3');
                                mySound2.play();
                        setTimeout(test,750)
                        function test(){
                        backElt.style.display = "block";
                        frontElt.style.display = "none";
                        }


                        for (let j = 0; j < frontCards.length; j++){

                            if (returnedCards[0]==frontCards[j]){

                                setTimeout(test3,750)
                                function test3(){
                                let test1 = document.getElementById(`front-${j}`);
                                let test2 = document.getElementById(`back-${j}`);
                                test1.style.display = "none";
                                test2.style.display = "block";
                                returnedCards = [];     
                            }
                            }

                        }
                        if (joueurEtat === true){
                            joueurEtat = false;
                            setTimeout(myFunctionJ2,500);
                            console.log(joueurEtat);
                        }
                        
                        else{
                            joueurEtat = true;
                            setTimeout(myFunctionJ1,500);
                            console.log(joueurEtat);
                        }

                        
            }
            
            }    

        




























































            let scoreJ1Elt = document.getElementById('scoreJ1');
            let scoreJ2Elt = document.getElementById('scoreJ2');           
            scoreJ1Elt.innerHTML = `<h2> SCORE Joueur 1 : ${scoreJ1} </h2>`;
            scoreJ2Elt.innerHTML = `<h2> SCORE Joueur 2 : ${scoreJ2} </h2>`;
            console.log(scoreJ1);
            console.log(frontCards[index]);
            console.log(returnedCards);
        
        
           
        }
        
          
       

        for (i = 0; i < frontCards.length; i ++)
        {
            showCard.innerHTML += `<img id="front-${i}" src="${frontCards[i]}" style="display: none"/>`;
            showCard.innerHTML += `<img onclick = "setTimeout(onClickedCard(${i}), 3000)" id="back-${i}" src="${backCard[i]}" style="display: block" class='imgDure'/>`;

        }

/*if( total === 10){
      if ( scoreJ1 > 5){
        alert("Bravo J1");    
      }
      if ( scoreJ1 === 5){
        alert("Egalite");    
      }
      if ( scoreJ2 > 5){
        alert("Bravo J2");    
      }
}
*/
    
    </script>
</body>
</html>